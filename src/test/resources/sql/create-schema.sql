create table "ACTIONS" ("NAME" VARCHAR(20) NOT NULL,"DESCRIPTION" VARCHAR(255) DEFAULT null,"ID" INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY);
create table "GENDERS" ("NAME" VARCHAR(20) NOT NULL,"DESCRIPTION" VARCHAR(255) DEFAULT null,"ID" INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY);
create table "IDENTIFICATION_TYPES" ("NAME" VARCHAR(50) NOT NULL,"ABBREVIATION" VARCHAR(5) NOT NULL,"DESCRIPTION" VARCHAR(255) DEFAULT null,"ID" INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY);
create table "PASSWORD_RECORDS" ("USER_ID" INTEGER NOT NULL,"PASSWORD" VARCHAR(255) NOT NULL,"PASSWORD_UPDATED_AT" TIMESTAMP NOT NULL,"ID" INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY);
create table "PERMISSIONS" ("ACTION_ID" INTEGER NOT NULL,"RESOURCE_ID" INTEGER NOT NULL,"ID" INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY);
create table "RESOURCES" ("NAME" VARCHAR(20) NOT NULL,"DESCRIPTION" VARCHAR(255) DEFAULT null,"ID" INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY);
create table "ROLES" ("NAME" VARCHAR(20) NOT NULL,"IP_FILTER" BOOLEAN DEFAULT false NOT NULL,"IS_SUPERTYPE" BOOLEAN DEFAULT false NOT NULL,"ID" INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY);
create table "ROLES_IPS" ("ROLE_ID" INTEGER NOT NULL,"IP" VARCHAR(45) NOT NULL,"ID" INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY);
create table "ROLES_PERMISSIONS" ("ROLE_ID" INTEGER NOT NULL,"PERMISSION_ID" INTEGER NOT NULL,"ID" INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY);
create table "ROLES_ROLES" ("PARENT_ROLE_ID" INTEGER NOT NULL,"CHILD_ROLE_ID" INTEGER NOT NULL,"ID" INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY);
create table "USERS" ("STATUS" INTEGER NOT NULL,"IDENTIFICATION" VARCHAR(20) NOT NULL,"IDENTIFICATION_TYPE_ID" INTEGER NOT NULL,"EMAIL" VARCHAR(254) NOT NULL,"EMAIL_CONFIRMED" BOOLEAN NOT NULL,"USERNAME" VARCHAR(30) NOT NULL,"PASSWORD" VARCHAR(255) NOT NULL,"PASSWORD_UPDATED_AT" TIMESTAMP DEFAULT null,"GENDER_ID" INTEGER NOT NULL,"FIRST_NAME" VARCHAR(50) DEFAULT null,"LAST_NAME" VARCHAR(50) DEFAULT null,"PHONE" VARCHAR(15) DEFAULT null,"ADDRESS" VARCHAR(255) DEFAULT null,"CREATED_AT" TIMESTAMP NOT NULL,"UPDATED_AT" TIMESTAMP DEFAULT null,"LOGIN_FAILED_ATTEMPTS" INTEGER DEFAULT 0 NOT NULL,"LAST_LOGIN_DATE" TIMESTAMP DEFAULT null,"LAST_LOGIN_IP" VARCHAR(45) DEFAULT null,"ID" INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY);
create unique index "USERS_EMAIL_IDX" on "USERS" ("EMAIL");
create unique index "USERS_IDENTIFICATION_IDX" on "USERS" ("IDENTIFICATION");
create index "USERS_STATUS_IDX" on "USERS" ("STATUS");
create unique index "USERS_USERNAME_IDX" on "USERS" ("USERNAME");
create table "USERS_ROLES" ("USER_ID" INTEGER NOT NULL,"ROLE_ID" INTEGER NOT NULL,"ID" INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY);
alter table "PASSWORD_RECORDS" add constraint "PASSWORD_RECORDS_USER_ID_FK" foreign key("USER_ID") references "USERS"("ID") on update NO ACTION on delete NO ACTION;
alter table "PERMISSIONS" add constraint "PERMISSIONS_ACTION_ID_FK" foreign key("ACTION_ID") references "ACTIONS"("ID") on update NO ACTION on delete NO ACTION;
alter table "PERMISSIONS" add constraint "PERMISSIONS_RESOURCE_ID_FK" foreign key("RESOURCE_ID") references "RESOURCES"("ID") on update NO ACTION on delete NO ACTION;
alter table "ROLES_IPS" add constraint "ROLES_IPS_ROLE_ID_FK" foreign key("ROLE_ID") references "ROLES"("ID") on update NO ACTION on delete NO ACTION;
alter table "ROLES_PERMISSIONS" add constraint "ROLES_PERMISSIONS_PERMISSION_ID_FK" foreign key("PERMISSION_ID") references "PERMISSIONS"("ID") on update NO ACTION on delete NO ACTION;
alter table "ROLES_PERMISSIONS" add constraint "ROLES_PERMISSIONS_ROLE_ID_FK" foreign key("ROLE_ID") references "ROLES"("ID") on update NO ACTION on delete NO ACTION;
alter table "ROLES_ROLES" add constraint "ROLES_ROLES_CHILD_ROLE_FK" foreign key("CHILD_ROLE_ID") references "ROLES"("ID") on update NO ACTION on delete NO ACTION;
alter table "ROLES_ROLES" add constraint "ROLES_ROLES_PARENT_ROLE_FK" foreign key("PARENT_ROLE_ID") references "ROLES"("ID") on update NO ACTION on delete NO ACTION;
alter table "USERS" add constraint "USERS_GENDER_FK" foreign key("GENDER_ID") references "GENDERS"("ID") on update NO ACTION on delete NO ACTION;
alter table "USERS" add constraint "USERS_IDENTIFICATION_TYPE_FK" foreign key("IDENTIFICATION_TYPE_ID") references "IDENTIFICATION_TYPES"("ID") on update NO ACTION on delete NO ACTION;
alter table "USERS_ROLES" add constraint "USERS_ROLES_ROLE_ID_FK" foreign key("ROLE_ID") references "ROLES"("ID") on update NO ACTION on delete NO ACTION;
alter table "USERS_ROLES" add constraint "USERS_ROLES_USER_ID_FK" foreign key("USER_ID") references "USERS"("ID") on update NO ACTION on delete NO ACTION;